import { Head, Image, Appear } from 'mdx-deck'
import Code from 'mdx-code';
import { CodeSurfer } from "mdx-deck-code-surfer";

import { Cover } from '../Cover';
import { Intro } from '../Intro';

export { default as theme } from '../theme'

<Head>
  <title>Relay Modern Deep Dive Course</title>
</Head>

<Cover />
---
### How to handle Autentication in Network Layer
<ul>
  <Appear>
    <li>At React Web you can save user session token on session storage local storage or cookies</li>
    <li>At React Native you can store user session on AsyncStorage</li>
    <li>How do add this info to Relay Network Layer</li>
  </Appear>
</ul>

```notes
```
---
<CodeSurfer
  title="Autentication on React Web in Relay"
  code={require('!raw-loader!./NetworkLayerWeb.ts')}
  showNumbers={false}
  dark={true}
  lang="jsx"
  steps={[
    { notes: "We can pass user token on Header on our Network Layer" },
    { range: [17,39], notes: 'This is our simple fetch function for our network layer' },
    { lines: [28], notes: 'We add Authorization header with the return o getToken function' },
    { range: [10,15], notes: 'getToken in this example get the token from a localStoraget key' },
    { range: [10,15], notes: 'getToken could get token from session storage or cookies as well' },
    { range: [17,39], notes: 'We can add more headers like platform (web/android/ios) and many more in our network layer' },
  ]}
/>
---
---
<CodeSurfer
  title="Autentication on React Native in Relay"
  code={require('!raw-loader!./NetworkLayerReactNative.ts')}
  showNumbers={false}
  dark={true}
  lang="jsx"
  steps={[
    { range: [13,38], notes: "fetch function can return a promise, so we can get data from async functions" },
    { lines: [22], notes: 'We can get async data before sending GraphQL request to our server' },
    { lines: [22], notes: 'Here, we are getting user token from AsyncStorage' },
    { lines: [27], notes: 'The user token is added on header in the same way as the web version' },
    { notes: 'Network Layer can be extended in many ways to attend your app requirements' },
  ]}
/>
```notes
```
