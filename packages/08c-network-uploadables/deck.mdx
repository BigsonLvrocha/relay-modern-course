import { Head, Image, Appear } from 'mdx-deck'
import Code from 'mdx-code';
import { CodeSurfer } from "mdx-deck-code-surfer";

import { Cover } from '../Cover';
import { Intro } from '../Intro';

export { default as theme } from '../theme'

<Head>
  <title>Relay Modern Deep Dive Course</title>
</Head>

<Cover />
---
### Handling File Uploads on Relay Modern
<ul>
  <Appear>
    <li>Sometimes you need to send some files to your GraphQL server</li>
    <li>Relay Modern provides this as uploadables</li>
  </Appear>
</ul>

```notes
```
---
<CodeSurfer
  title="Uploadables Deep Dive"
  code={require('!raw-loader!./fetchQuery.ts')}
  showNumbers={false}
  dark={true}
  lang="jsx"
  steps={[
    { notes: "We going to modify our fetch function to accept uploadables" },
    { range: [10,13], notes: 'Uploadables is a map/object with many Files or Blobs' },
    { lines: [90], notes: 'Our body request should change based on uploadables information' },
    { range: [45,62], notes: 'We need a type of body when there is uploadables and another otherwise' },
    { range: [35,42], notes: 'Without uploadables is a simple JSON body' },
    { range: [15,33], notes: 'With uploadables is a FormData with query, variables and one key per File/Blob' },
    { range: [92,95], notes: 'Request headers should change based on uploadables' },
    { range: [64,77], notes: 'For uploadables we accept anything, for normal request we use json' },
    { range: [84,104], notes: 'Your GraphQL should implement support to uploadables, usually using multer' },
  ]}
/>
---
