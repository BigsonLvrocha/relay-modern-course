import { Head, Image, Appear } from 'mdx-deck'
import Code from 'mdx-code';
import { CodeSurfer } from "mdx-deck-code-surfer";

import { Cover } from '../Cover';
import { Intro } from '../Intro';

export { default as theme } from '../theme'

<Head>
  <title>Relay Modern Deep Dive Course</title>
</Head>

<Cover />

```notes
Relay Modern is a framework for data fetching that scales
We've going cover from the basics concepts to setup and advanced patterns
```
---
### Pre Requisites
<ul>
  <Appear>
    <li>JavaScript</li>
    <li>React</li>
    <li>Node</li>
    <li>GraphQL</li>
  </Appear>
</ul>

```notes
Feel free to send me a DM if you don't understand any of the concepts
You can improve your knowledge of this topics as we progres
```
---
# How to setup Relay Modern
<ul>
  <Appear>
    <li>What we gonna need?</li>
  </Appear>
</ul>
---
## Relay Compiler
<ul>
  <Appear>
    <li>A GraphQL compiler that optimizes queries and enable directives</li>
  </Appear>
</ul>

```notes
Relay Compiler will transform your queries and fragments in compiled artifacts to be used by relay runtime
Relay Compiler will also make sure all your queries and fragments are correct, so you don't have runtime errors
```
---
# Relay Runtime
<ul>
  <Appear>
    <li>A GraphQL runtime that enable cache, optimized read and write, gargabe collector and more</li>
  </Appear>
</ul>

```notes
Relay Runtime will handle cache of your GraphQL data,
it will handle requests, mutations, optimistic updates, defer, stream,
and gargabe collector and much more
```
---
# React Relay
<ul>
  <Appear>
    <li>Integrate Relay Runtime with React</li>
  </Appear>
</ul>

```notes
React Relay is a Relay Runtime binding to React components.
We have Vue Relay as well if you want to use relay in Vue components,
you can could also build angular relay if you want.
React Relay will provide fragment container that let your components declares data requirements
```
---
# Babel Plugin Relay
<ul>
  <Appear>
    <li>Babel plugin that convert GraphQL to runtime artifacts</li>
  </Appear>
</ul>

```notes
Babel Plugin Relay will change your GraphQL queries and fragments to generated code by Relay Compiler
```
---
# Installation
```bash
yarn add react react-dom react-relay
yarn add --dev babel-plugin-relay graphql relay-compiler
```
---
<div style={{fontSize: 20}}>
<CodeSurfer
  title="Relay Compiler yarn script"
  code={`
    "scripts": {
      "relay": "relay-compiler --src ./src --schema ./data/schema.graphql"
    }
  `}
  showNumbers={false}
  dark={true}
  lang="json"
  steps={[
    { notes: "Adding Relay compiler script to your package.json" },
  ]}
/>
</div>

```notes
You should run relay compiler everytime your queries or fragments changed
```
---
<CodeSurfer
  title="Babel Plugin Relay Config"
  code={`
    [
     'relay',
     {
        schema: './data/schema.json',
     },
    ]
  `}
  showNumbers={false}
  dark={true}
  lang="diff"
  steps={[
    { notes: "Adding babel plugin relay to your babel.config.js" },
  ]}
/>
---
Starter boilerplates
<ul>
  <Appear>
    <li><a href='https://github.com/sibelius/relay-modern-typescript'>https://github.com/sibelius/relay-modern-typescript</a> - Relay Modern + Typescript + Webpack</li>
    <li><a href='https://github.com/sibelius/create-react-app-relay-modern'>https://github.com/sibelius/create-react-app-relay-modern</a> - Create React App + Relay Modern</li>
  </Appear>
</ul>
